{
  "id": "8148511f-bce6-4786-adea-fc24f6742132",
  "type": "DOCUMENT_EPOCH_ADVANCED",
  "created": "2025-10-24T17:16:00.410Z",
  "uid": "myos-quiz-demo",
  "ref": "c9de5ea2-d8b0-4cac-96c8-049856e8e8f2:2",
  "object": {
    "sessionId": "c9de5ea2-d8b0-4cac-96c8-049856e8e8f2",
    "epoch": 2,
    "created": "2025-10-24T17:16:00.351Z",
    "blueId": "8qPogHUcv2BCPPmPV3ZW6W67rX3A6sRYeL7MT9dszzKe",
    "document": {
      "name": "AI Multiplayer Quiz",
      "description": "Target Blue document to be bootstrapped",
      "contracts": {
        "initLifecycleChannel": {
          "type": "Core/Lifecycle Event Channel",
          "event": {
            "type": "Conversation/Lifecycle Event"
          }
        },
        "triggeredEventsChannel": {
          "type": "Core/Triggered Event Channel"
        },
        "adminChannel": {
          "description": "Game admin (X)",
          "type": "MyOS/MyOS Timeline Channel",
          "timelineId": {
            "type": "Text",
            "value": "a90f6e2c-9988-4bfa-b634-b4378e398475"
          },
          "accountId": {
            "description": "Account identifier for the MyOS timeline",
            "type": "Text",
            "value": "myos-quiz-demo"
          },
          "email": {
            "description": "Email address associated with the MyOS timeline",
            "type": "Text"
          }
        },
        "playerAChannel": {
          "description": "Player A",
          "type": "MyOS/MyOS Timeline Channel",
          "timelineId": {
            "type": "Text",
            "value": "98c52bf0-453d-432e-a06b-8825ffcb308a"
          },
          "accountId": {
            "description": "Account identifier for the MyOS timeline",
            "type": "Text",
            "value": "c9d9155d-2f5d-411e-87aa-58e61ddff3f5"
          },
          "email": {
            "description": "Email address associated with the MyOS timeline",
            "type": "Text"
          }
        },
        "playerBChannel": {
          "description": "Player B",
          "type": "MyOS/MyOS Timeline Channel",
          "timelineId": {
            "type": "Text",
            "value": "b1a3dec4-6a5a-4f51-807e-d7635b83b939"
          },
          "accountId": {
            "description": "Account identifier for the MyOS timeline",
            "type": "Text",
            "value": "84f0a5e0-a34f-4044-893a-c209f7d100d8"
          },
          "email": {
            "description": "Email address associated with the MyOS timeline",
            "type": "Text"
          }
        },
        "startRound": {
          "description": "Starts a round by setting question/options (no correct answer here!)",
          "type": "Conversation/Operation",
          "channel": {
            "description": "Specifies the channel through which Operation Request events are sent to invoke this operation on the document.",
            "type": "Text",
            "value": "adminChannel"
          },
          "request": {
            "description": "Defines the expected input structure and validation rules for the operation. This represents the data that will be passed when the operation is invoked.",
            "roundIndex": {
              "type": "Integer"
            },
            "question": {
              "questionId": {
                "type": "Text"
              },
              "category": {
                "type": "Text"
              },
              "level": {
                "type": "Integer"
              },
              "prompt": {
                "type": "Text"
              },
              "options": {
                "type": "Dictionary",
                "keyType": {
                  "blueId": "DLRQwz7MQeCrzjy9bohPNwtCxKEBbKaMK65KBrwjfG6K"
                },
                "valueType": {
                  "blueId": "DLRQwz7MQeCrzjy9bohPNwtCxKEBbKaMK65KBrwjfG6K"
                }
              }
            }
          }
        },
        "startRoundImpl": {
          "type": "Conversation/Sequential Workflow Operation",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n"
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "GuardAndEmitRoundStarted",
                "type": "Conversation/JavaScript Code",
                "code": {
                  "type": "Text",
                  "value": "const phase = document('/phase');\nif (phase === 'IN_ROUND' || phase === 'GAME_COMPLETED') {\n  return {};\n}\n\nconst req = event.message.request || {};\nif (!req || typeof req !== 'object') return {};\n\nconst requestedIndex = Number.isInteger(req.roundIndex) ? req.roundIndex : null;\nif (requestedIndex === null) {\n  return {};\n}\n\nconst roundsTotal = document('/roundsTotal') ?? 1;\nif (requestedIndex < 0 || requestedIndex >= roundsTotal) {\n  return {};\n}\n\nconst currentIndex = document('/roundIndex') ?? 0;\nconst expectedIndex = phase === 'BETWEEN_ROUNDS' ? currentIndex + 1 : currentIndex;\nif (requestedIndex !== expectedIndex) {\n  return {};\n}\n\nconst question = req.question;\nif (!question || typeof question !== 'object') {\n  return {};\n}\n\nconst { questionId, category, level, prompt, options } = question;\nif (typeof questionId !== 'string' || !questionId.trim()) {\n  return {};\n}\nif (typeof category !== 'string' || !category.trim()) {\n  return {};\n}\nif (typeof prompt !== 'string' || !prompt.trim()) {\n  return {};\n}\n\nconst normalizedQuestionId = questionId.trim();\nconst normalizedCategory = category.trim();\nconst normalizedPrompt = prompt.trim();\n\nconst allowedCategories = document('/categories');\nif (Array.isArray(allowedCategories) && allowedCategories.length > 0) {\n  const normalizedAllowed = allowedCategories\n    .filter(cat => typeof cat === 'string')\n    .map(cat => cat.trim().toLowerCase());\n  if (!normalizedAllowed.includes(normalizedCategory.toLowerCase())) {\n    return {};\n  }\n}\n\nconst normalizedLevel = Number.isInteger(level) ? level : null;\nif (normalizedLevel === null) {\n  return {};\n}\n\nconst allowedChoices = ['A', 'B', 'C', 'D'];\nif (!options || typeof options !== 'object') {\n  return {};\n}\nconst normalizedOptions = {};\nfor (const choice of allowedChoices) {\n  const value = options[choice];\n  if (typeof value !== 'string' || !value.trim()) {\n    return {};\n  }\n  normalizedOptions[choice] = value;\n}\n\nreturn {\n  events: [\n    {\n      type: \"Conversation/Event\",\n      kind: \"Round Started\",\n      roundIndex: requestedIndex,\n      question: {\n        questionId: normalizedQuestionId,\n        category: normalizedCategory,\n        level: normalizedLevel,\n        prompt: normalizedPrompt,\n        options: normalizedOptions,\n      },\n    },\n  ],\n};\n"
                }
              }
            ]
          },
          "operation": {
            "description": "References the name of the operation definition that this implementation serves. Links this workflow to a specific Operation contract.",
            "type": "Text",
            "value": "startRound"
          }
        },
        "completeRound": {
          "description": "Completes the round with the authoritative correct option",
          "type": "Conversation/Operation",
          "channel": {
            "description": "Specifies the channel through which Operation Request events are sent to invoke this operation on the document.",
            "type": "Text",
            "value": "adminChannel"
          },
          "request": {
            "description": "Defines the expected input structure and validation rules for the operation. This represents the data that will be passed when the operation is invoked.",
            "roundIndex": {
              "type": "Integer"
            },
            "questionId": {
              "type": "Text"
            },
            "correctOption": {
              "type": "Text"
            },
            "explanation": {
              "type": "Text"
            }
          }
        },
        "completeRoundImpl": {
          "type": "Conversation/Sequential Workflow Operation",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n"
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "GuardComputeAndEmit",
                "type": "Conversation/JavaScript Code",
                "code": {
                  "type": "Text",
                  "value": "// ---- Guards ----\nconst phase = document('/phase');\nif (phase !== 'IN_ROUND') return {};  // must be in a live round\nconst curQ = document('/currentQuestion');\nif (!curQ) return {};\nconst req = event.message.request;\nconst docIdx = document('/roundIndex') ?? 0;\nif (req.roundIndex !== docIdx) return {};\nif (req.questionId !== curQ.questionId) return {};\nconst correct = (req.correctOption || '').trim().toUpperCase();\nif (!['A','B','C','D'].includes(correct)) return {};\n\n// ---- Compute results (answers may be missing; timeouts OK) ----\nconst answers = document('/answers') || {};\nconst aAns = answers.playerA ?? null;\nconst bAns = answers.playerB ?? null;\n\nconst scoreboard = document('/scoreboard') || { playerA: 0, playerB: 0 };\nconst aPoint = aAns === correct ? 1 : 0;\nconst bPoint = bAns === correct ? 1 : 0;\nconst newBoard = {\n  playerA: (scoreboard.playerA || 0) + aPoint,\n  playerB: (scoreboard.playerB || 0) + bPoint,\n};\n\nconst roundsTotal = document('/roundsTotal') || 1;\nconst nextIndex = req.roundIndex + 1;\nconst hasMore = nextIndex < roundsTotal;\n\nconst results = {\n  roundIndex: req.roundIndex,\n  questionId: req.questionId,\n  correctOption: correct,\n  explanation: req.explanation,\n  answers: { playerA: aAns, playerB: bAns },\n  pointsAwarded: { playerA: aPoint, playerB: bPoint },\n  scoreboard: newBoard\n};\n\nconst events = [{ type: \"Conversation/Event\", kind: \"Round Completed\", results }];\nif (hasMore) {\n  events.push({ type: \"Conversation/Event\", kind: \"Round Requested\", nextRoundIndex: nextIndex });\n} else {\n  const maxScore = Math.max(newBoard.playerA, newBoard.playerB);\n  const winners = [];\n  if (newBoard.playerA === maxScore) winners.push(\"playerA\");\n  if (newBoard.playerB === maxScore) winners.push(\"playerB\");\n  events.push({ type: \"Conversation/Event\", kind: \"Game Completed\", scoreboard: newBoard, winners });\n}\nreturn { events };\n"
                }
              }
            ]
          },
          "operation": {
            "description": "References the name of the operation definition that this implementation serves. Links this workflow to a specific Operation contract.",
            "type": "Text",
            "value": "completeRound"
          }
        },
        "answerA": {
          "description": "Player A answers current question",
          "type": "Conversation/Operation",
          "channel": {
            "description": "Specifies the channel through which Operation Request events are sent to invoke this operation on the document.",
            "type": "Text",
            "value": "playerAChannel"
          },
          "request": {
            "description": "Defines the expected input structure and validation rules for the operation. This represents the data that will be passed when the operation is invoked.",
            "type": "Text"
          }
        },
        "answerAImpl": {
          "type": "Conversation/Sequential Workflow Operation",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n"
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "GuardAndEmitAnswerA",
                "type": "Conversation/JavaScript Code",
                "code": {
                  "type": "Text",
                  "value": "const phase = document('/phase');\nif (phase !== 'IN_ROUND') return {};\nconst curQ = document('/currentQuestion');\nif (!curQ) return {};\nconst prev = document('/answers/playerA');\nif (prev !== undefined && prev !== null) return {};   // already answered\nconst raw = (event.message.request || '').trim().toUpperCase();\nif (!['A','B','C','D'].includes(raw)) return {};\nif (!curQ.options || !(raw in curQ.options)) return {}; // must match existing option\nreturn { events: [{ type: \"Conversation/Event\", kind: \"Answer Submitted\", player: \"playerA\", choice: raw }] };\n"
                }
              }
            ]
          },
          "operation": {
            "description": "References the name of the operation definition that this implementation serves. Links this workflow to a specific Operation contract.",
            "type": "Text",
            "value": "answerA"
          }
        },
        "answerB": {
          "description": "Player B answers current question",
          "type": "Conversation/Operation",
          "channel": {
            "description": "Specifies the channel through which Operation Request events are sent to invoke this operation on the document.",
            "type": "Text",
            "value": "playerBChannel"
          },
          "request": {
            "description": "Defines the expected input structure and validation rules for the operation. This represents the data that will be passed when the operation is invoked.",
            "type": "Text"
          }
        },
        "answerBImpl": {
          "type": "Conversation/Sequential Workflow Operation",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n"
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "GuardAndEmitAnswerB",
                "type": "Conversation/JavaScript Code",
                "code": {
                  "type": "Text",
                  "value": "const phase = document('/phase');\nif (phase !== 'IN_ROUND') return {};\nconst curQ = document('/currentQuestion');\nif (!curQ) return {};\nconst prev = document('/answers/playerB');\nif (prev !== undefined && prev !== null) return {};   // already answered\nconst raw = (event.message.request || '').trim().toUpperCase();\nif (!['A','B','C','D'].includes(raw)) return {};\nif (!curQ.options || !(raw in curQ.options)) return {};\nreturn { events: [{ type: \"Conversation/Event\", kind: \"Answer Submitted\", player: \"playerB\", choice: raw }] };\n"
                }
              }
            ]
          },
          "operation": {
            "description": "References the name of the operation definition that this implementation serves. Links this workflow to a specific Operation contract.",
            "type": "Text",
            "value": "answerB"
          }
        },
        "validateOnInit": {
          "type": "Conversation/Sequential Workflow",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text",
            "value": "initLifecycleChannel"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n",
            "type": "Core/Document Processing Initiated"
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "ValidateInputs",
                "type": "Conversation/JavaScript Code",
                "code": {
                  "type": "Text",
                  "value": "const issues = [];\nconst roundsTotal = document('/roundsTotal');\nconst categories = document('/categories');\nconst level = document('/level');\nif (!roundsTotal || roundsTotal < 1) issues.push(\"roundsTotal must be >= 1\");\nif (!Array.isArray(categories) || categories.length === 0) issues.push(\"categories must be a non-empty list\");\nif (typeof level !== 'number' || level < 0 || level > 2) issues.push(\"level must be 0..2\");\nif (issues.length > 0) {\n  return { events: [ { type: \"Conversation/Event\", kind: \"Status Change\", status: { type: \"Conversation/Status Failed\" }, issues } ] };\n}\nreturn { events: [\n  { type: \"Conversation/Event\", kind: \"Status Change\", status: { type: \"Conversation/Status In Progress\" } },\n  { type: \"Conversation/Event\", kind: \"Round Requested\", nextRoundIndex: 0 }\n] };\n"
                }
              }
            ]
          }
        },
        "onStatusChange": {
          "type": "Conversation/Sequential Workflow",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text",
            "value": "triggeredEventsChannel"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n",
            "type": "Conversation/Event",
            "kind": {
              "type": "Text",
              "value": "Status Change"
            }
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "UpdateStatus",
                "type": "Conversation/Update Document",
                "changeset": {
                  "type": "List",
                  "itemType": {
                    "blueId": "GgvWdp9xdcmwWCMTVKgy2GCrP6Pbim5FQTrjMPH8yPoL"
                  },
                  "items": [
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/status"
                      },
                      "val": {
                        "type": "Text",
                        "value": "${event.status}"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        "onRoundStarted": {
          "type": "Conversation/Sequential Workflow",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text",
            "value": "triggeredEventsChannel"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n",
            "type": "Conversation/Event",
            "kind": {
              "type": "Text",
              "value": "Round Started"
            }
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "ApplyRoundStart",
                "type": "Conversation/Update Document",
                "changeset": {
                  "type": "List",
                  "itemType": {
                    "blueId": "GgvWdp9xdcmwWCMTVKgy2GCrP6Pbim5FQTrjMPH8yPoL"
                  },
                  "items": [
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/status"
                      },
                      "val": {
                        "type": "Conversation/Status In Progress",
                        "mode": {
                          "description": "Defines the high-level phase of the document's lifecycle. Must be one of:\n  pending: The document is waiting for a pre-condition before its core logic begins.\n  active: The document is in its main operational phase, actively processing events.\n  terminated: The document has reached a final, conclusive state.",
                          "type": "Text",
                          "value": "active"
                        }
                      }
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/roundIndex"
                      },
                      "val": {
                        "type": "Text",
                        "value": "${event.roundIndex}"
                      }
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/currentQuestion"
                      },
                      "val": {
                        "type": "Text",
                        "value": "${event.question}"
                      }
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/answers"
                      },
                      "val": {}
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/phase"
                      },
                      "val": {
                        "type": "Text",
                        "value": "IN_ROUND"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        "onAnswerSubmittedA": {
          "type": "Conversation/Sequential Workflow",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text",
            "value": "triggeredEventsChannel"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n",
            "type": "Conversation/Event",
            "kind": {
              "type": "Text",
              "value": "Answer Submitted"
            },
            "player": {
              "type": "Text",
              "value": "playerA"
            }
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "RecordA",
                "type": "Conversation/Update Document",
                "changeset": {
                  "type": "List",
                  "itemType": {
                    "blueId": "GgvWdp9xdcmwWCMTVKgy2GCrP6Pbim5FQTrjMPH8yPoL"
                  },
                  "items": [
                    {
                      "op": {
                        "type": "Text",
                        "value": "add"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/answers/playerA"
                      },
                      "val": {
                        "type": "Text",
                        "value": "${event.choice}"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        "onAnswerSubmittedB": {
          "type": "Conversation/Sequential Workflow",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text",
            "value": "triggeredEventsChannel"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n",
            "type": "Conversation/Event",
            "kind": {
              "type": "Text",
              "value": "Answer Submitted"
            },
            "player": {
              "type": "Text",
              "value": "playerB"
            }
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "RecordB",
                "type": "Conversation/Update Document",
                "changeset": {
                  "type": "List",
                  "itemType": {
                    "blueId": "GgvWdp9xdcmwWCMTVKgy2GCrP6Pbim5FQTrjMPH8yPoL"
                  },
                  "items": [
                    {
                      "op": {
                        "type": "Text",
                        "value": "add"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/answers/playerB"
                      },
                      "val": {
                        "type": "Text",
                        "value": "${event.choice}"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        "onRoundCompleted": {
          "type": "Conversation/Sequential Workflow",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text",
            "value": "triggeredEventsChannel"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n",
            "type": "Conversation/Event",
            "kind": {
              "type": "Text",
              "value": "Round Completed"
            }
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "ApplyResults",
                "type": "Conversation/Update Document",
                "changeset": {
                  "type": "List",
                  "itemType": {
                    "blueId": "GgvWdp9xdcmwWCMTVKgy2GCrP6Pbim5FQTrjMPH8yPoL"
                  },
                  "items": [
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/scoreboard"
                      },
                      "val": {
                        "type": "Text",
                        "value": "${event.results.scoreboard}"
                      }
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/lastRoundResult"
                      },
                      "val": {
                        "type": "Text",
                        "value": "${event.results}"
                      }
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/phase"
                      },
                      "val": {
                        "type": "Text",
                        "value": "BETWEEN_ROUNDS"
                      }
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "remove"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/currentQuestion"
                      }
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/answers"
                      },
                      "val": {}
                    }
                  ]
                }
              }
            ]
          }
        },
        "onGameCompleted": {
          "type": "Conversation/Sequential Workflow",
          "channel": {
            "description": "Name of the channel this workflow listens to.\n",
            "type": "Text",
            "value": "triggeredEventsChannel"
          },
          "event": {
            "description": "Optional event-type criteria to filter incoming events from the channel.\n",
            "type": "Conversation/Event",
            "kind": {
              "type": "Text",
              "value": "Game Completed"
            }
          },
          "steps": {
            "type": "List",
            "itemType": {
              "blueId": "CvfSAWwJ4ZAMDNfum11cEcs54ECL8oszspkPKrMMY7xt"
            },
            "items": [
              {
                "name": "Finish",
                "type": "Conversation/Update Document",
                "changeset": {
                  "type": "List",
                  "itemType": {
                    "blueId": "GgvWdp9xdcmwWCMTVKgy2GCrP6Pbim5FQTrjMPH8yPoL"
                  },
                  "items": [
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/status"
                      },
                      "val": {
                        "type": "Conversation/Status Completed",
                        "mode": {
                          "description": "Defines the high-level phase of the document's lifecycle. Must be one of:\n  pending: The document is waiting for a pre-condition before its core logic begins.\n  active: The document is in its main operational phase, actively processing events.\n  terminated: The document has reached a final, conclusive state.",
                          "type": "Text",
                          "value": "terminated"
                        }
                      }
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/winners"
                      },
                      "val": {
                        "type": "Text",
                        "value": "${event.winners}"
                      }
                    },
                    {
                      "op": {
                        "type": "Text",
                        "value": "replace"
                      },
                      "path": {
                        "type": "Text",
                        "value": "/phase"
                      },
                      "val": {
                        "type": "Text",
                        "value": "GAME_COMPLETED"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        "checkpoint": {
          "type": "Core/Channel Event Checkpoint",
          "lastEvents": {
            "adminChannel": {
              "blueId": "BTo5ceaUWk6679C5Jy4JPyjq6XSMdySTKGkCET16Fauv"
            },
            "playerAChannel": {
              "blueId": "FcSA9frXVDmMxbeQ6apgeTHwFPTkwtRU9Di4y9rEkF8F"
            }
          }
        },
        "initialized": {
          "type": "Core/Processing Initialized Marker"
        }
      },
      "roundsTotal": {
        "type": "Integer",
        "value": 2
      },
      "categories": {
        "items": [
          {
            "type": "Text",
            "value": "History"
          },
          {
            "type": "Text",
            "value": "Science"
          }
        ]
      },
      "level": {
        "type": "Integer",
        "value": 1
      },
      "roundIndex": {
        "type": "Integer",
        "value": 0
      },
      "status": {
        "type": "Conversation/Status In Progress",
        "mode": {
          "description": "Defines the high-level phase of the document's lifecycle. Must be one of:\n  pending: The document is waiting for a pre-condition before its core logic begins.\n  active: The document is in its main operational phase, actively processing events.\n  terminated: The document has reached a final, conclusive state.",
          "type": "Text",
          "value": "active"
        }
      },
      "currentQuestion": {
        "questionId": {
          "type": "Text",
          "value": "q1"
        },
        "category": {
          "type": "Text",
          "value": "History"
        },
        "level": {
          "type": "Integer",
          "value": 1
        },
        "prompt": {
          "type": "Text",
          "value": "Which civilization is credited with creating the first known form of writing?"
        },
        "options": {
          "A": {
            "type": "Text",
            "value": "Ancient Egypt"
          },
          "B": {
            "type": "Text",
            "value": "Mesopotamia"
          },
          "C": {
            "type": "Text",
            "value": "Indus Valley"
          },
          "D": {
            "type": "Text",
            "value": "Ancient China"
          }
        }
      },
      "answers": {
        "playerA": {
          "type": "Text",
          "value": "B"
        }
      },
      "phase": {
        "type": "Text",
        "value": "IN_ROUND"
      }
    },
    "emitted": [
      {
        "type": "Conversation/Event",
        "kind": {
          "type": "Text",
          "value": "Answer Submitted"
        },
        "player": {
          "type": "Text",
          "value": "playerA"
        },
        "choice": {
          "type": "Text",
          "value": "B"
        }
      },
      {
        "type": "Core/Document Update",
        "op": {
          "type": "Text",
          "value": "add"
        },
        "path": {
          "type": "Text",
          "value": "/answers/playerA"
        },
        "val": {
          "type": "Text",
          "value": "B"
        }
      }
    ],
    "triggeredBy": {
      "type": "MyOS/MyOS Timeline Entry",
      "message": {
        "type": "Conversation/Operation Request",
        "operation": {
          "type": "Text",
          "value": "answerA"
        },
        "request": {
          "type": "Text",
          "value": "B"
        }
      },
      "timeline": {
        "timelineId": {
          "type": "Text",
          "value": "98c52bf0-453d-432e-a06b-8825ffcb308a"
        }
      },
      "timestamp": {
        "type": "Integer",
        "value": 1761326159244498
      },
      "actor": {
        "type": "Conversation/Actor",
        "accountId": {
          "type": "Text",
          "value": "c9d9155d-2f5d-411e-87aa-58e61ddff3f5"
        }
      }
    }
  }
}
